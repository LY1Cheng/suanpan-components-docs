# 均值漂移聚类（MeanShift）使用文档
| 组件名称 |均值漂移聚类（MeanShift）|  |  |
| --- | --- | --- | --- |
| 工具集 | 机器学习 |  |  |
| 组件作者 | 雪浪云-墨文 |  |  |
| 文档版本 | 1.0 |  |  |
| 功能 |均值漂移聚类（MeanShift）算法|  |  |
| 镜像名称 | ml_components:3 |  |  |
| 开发语言 | Python |  |  |

## 组件原理
均值漂移聚类是基于滑动窗口的算法，它试图找到数据点的密集区域。这是一个基于质心的算法，这意味着它的目标是定位每个组/类的中心点，通过将中心点的候选点更新为滑动窗口内点的均值来完成。然后，在后处理阶段对这些候选窗口进行过滤以消除近似重复，形成最终的中心点集及其相应的组。请看下面的图例。

![](./img/均值漂移聚类1.gif)

均值漂移聚类用于单个滑动窗口    

为了解释均值漂移，我们将考虑二维空间中的一组点，如上图所示。

- 1.我们从一个以 C 点（随机选择）为中心，以半径 r 为核心的圆形滑动窗口开始。均值漂移是一种爬山算法，它包括在每一步中迭代地向更高密度区域移动，直到收敛。
- 2.在每次迭代中，滑动窗口通过将中心点移向窗口内点的均值（因此而得名）来移向更高密度区域。滑动窗口内的密度与其内部点的数量成正比。自然地，通过向窗口内点的均值移动，它会逐渐移向点密度更高的区域。
- 3.我们继续按照均值移动滑动窗口直到没有方向在核内可以容纳更多的点。请看上面的图；我们一直移动这个圆直到密度不再增加（即窗口中的点数）。
- 4.步骤 1 到 3 的过程是通过许多滑动窗口完成的，直到所有的点位于一个窗口内。当多个滑动窗口重叠时，保留包含最多点的窗口。然后根据数据点所在的滑动窗口进行聚类。

## 输入桩
支持单个csv文件输入。
### 输入端子1

- **端口名称**：训练数据
- **输入类型**：Csv文件
- **功能描述**： 输入用于训练的数据
## 输出桩
支持sklearn模型输出。
### 输出端子1

- **端口名称**：输出模型
- **输出类型**：sklearn模型
- **功能描述**： 输出训练好的模型用于预测
### 输出端子2

- **端口名称**：输出数据
- **输出类型**：Csv文件
- **功能描述**： 聚类后的数据
## 参数配置
### 带宽

- **功能描述**：RBF核函数中使用的带宽参数
- **必选参数**：是
- **默认值**：2
### 数据点分桶

- **功能描述**：如果为True，则初始核心位置不是所有点的位置，而是点离散化后的位置
- **必选参数**：是
- **默认值**：true
### 桶内数据点最小数量

- **功能描述**：为了加速算法运行，只接受桶内数据量超过一定量的分桶
- **必选参数**：否
- **默认值**：1
### 聚类所有数据点

- **功能描述**：是否聚类所有的数据点，如果为True，则孤立点被分配给最近的核心点，否则孤立点都被归类为-1
- **必选参数**：是
- **默认值**：true
### 并行度

- **功能描述**：算法运行时的并行度
- **必选参数**：否
- **默认值**：（无）
### 最大迭代次数

- **功能描述**：最大迭代次数
- **必选参数**：是
- **默认值**：300
### 需要训练

- **功能描述**：该模型是否需要训练，默认为需要训练。
- **必选参数**：是
- **默认值**：true
### 特征字段

- **功能描述**：特征字段
- **必选参数**：是
- **默认值**：（无）
### 识别字段

- **功能描述**：识别字段
- **必选参数**：是
- **默认值**：（无）
## 使用方法
- 将组件拖入到项目中
- 与前一个组件输出的端口连接（必须是csv类型）
- 点击运行该节点


![](./img/均值漂移聚类2.png)



