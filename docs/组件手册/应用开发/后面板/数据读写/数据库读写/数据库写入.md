# 数据库写入使用文档
| 组件名称 | 数据库写入 |  |  |
| --- | --- | --- | --- |
| 工具集 | 数据库读写 |  |  |
| 组件作者 | 雪浪云-墨文 |  |  |
| 文档版本 | 1.0 |  |  |
| 功能 | 用于写入数据库数据 |  |  |
| 镜像名称 | database-source-components:3 |  |  |
| 开发语言 | Python |  |  |

## 组件原理
使用该组件实现数据库写入功能，支持MySQL、Postgresql、Hive、SqlServer、Oracle、MariaDB、influxDB共七种数据库。

## 输入桩

### 输入端子1

- **端口名称：** in1
- **输入类型：** Csv文件
- **功能描述：** 接收需要写入数据库的数据文件

## 输出桩
无

## 组件使用
### 数据库连接配置
- 当首次进去组件页面时，在左上角“数据库连接”或是连接右侧的“+”号菜单里，选择需要连接的数据库，目前支持MySQL、Postgresql、Hive、SqlServer、Oracle、MariaDB、influxDB共7种数据库
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A51.png)
#### MySQL数据库
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A52.png)
- 服务器：服务器ip或者hostname
- 端口：服务端口，默认为3306
- 数据库名称：需要连接的数据库名称
- 用户名
- 密码
#### MariaDB数据库
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A53.png)

配置与Mysql类似

#### Postgresql数据库
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A54.png)

配置与Mysql类似

#### Sql Server数据库
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A55.png)

配置与Mysql类似
#### Hive数据库
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A56.png)

- 身份验证：可选无身份验证、kerberos、用户名和密码三种不同的登录方式连接到Hive数据库。

#### Oracle数据库
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A57.png)

- 连接类型：选择不同的连接类型连接到Oracle数据库，可选Basic和TNS。

#### InfluxDB数据库
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A58.png)

配置与Mysql类似

### 数据库配置

- 成功连接数据库后，页面如下：

![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A59.png)

- 在右侧“表字段对比”标签栏中，可以查看输入数据结构，包含输入数据的列名以及每列的数据类型
- 在“输入数据详情”标签栏中，可以查看输入数据的预览，包含前100条数据，如下：

![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A510.png)

### 写入配置

- 在左侧数据库选择栏中，选择数据库，在“SQL执行器”左侧会出现“写入配置”标签；在该标签中，配置写入设置，写入方式有“创建表”和“追加到表”选项。如果写入方式为“创建表”，需要在输入完成表名后点击输入栏右侧“创建”按钮，然后点击“手动执行”，执行将表写入数据库的操作。执行完成后，右侧会弹出执行成功与否的提示，并更新数据库中的目标表的结构。
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A511.png)

### SQL执行器

在“SQL执行器中”，可以执行自定义SQL语句，可以对数据库进行增、删、改的操作。

### 设置完成
- 点击“部署”后，配置完成，每次触发时，节点自动执行写入数据库操作，“部署”按钮切换为“编辑”按钮
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A512.png)
- 当前状态代表配置已完成，触发时，节点自动执行写入操作
![](./img/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%99%E5%85%A513.png)
- 当前状态代表配置未完成，触发时，节点不会执行写入操作
- 组件运行成功后，即可去数据库相应的表查看数据