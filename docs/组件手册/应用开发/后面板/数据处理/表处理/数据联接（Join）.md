# 数据联接（Join）使用文档
| 组件名称 | 数据联接（Join） |  |  |
| --- | --- | --- | --- |
| 工具集 | 数据处理 |  |  |
| 组件作者 | 雪浪云-墨文 |  |  |
| 文档版本 | 1.0 |  |  |
| 功能 | 数据联接组件，对输入的数据进行联接（Join）操作 |  |  |
| 镜像名称 | data-analysis-components:3 |  |  |
| 开发语言 | Python |  |  |

## 组件原理
使用该组件实现将2个数据源联接为1个，类似于SQL中的Join操作

## 输入桩

### 输入端子1

- **端口名称：** 输入数据1
- **输出类型：** Csv文件
- **功能描述：** Csv文件输入

### 输入端子2

- **端口名称：** 输入数据2
- **输出类型：** Csv文件
- **功能描述：** Csv文件输入

## 输出桩

### 输出端子1

- **端口名称：** 输出数据
- **输出类型：** Csv文件
- **功能描述：** 将联接好的Csv文件输出

## 数据接收方式

该组件同时支持同步和异步接收方式

## 参数配置

### 配置页面

1. 操作界面

界面分为四个部分，工具栏，联接配置面板，数据概览，数据详情，分别对应下图1，2，3，4部分
![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A51.png)

2. 输出设置

右上角"设置输出格式"按钮，如下图所示，可以选择输出的格式：
- CSV：输出结构化数据文件（输出桩需要设置为CSV文件）
- JSON：形如[{"a": 1, "b": 2}, {"a": 3, "b": 4}]格式的JSON数据（输出桩需要设置为对象）
- Echarts组件可视化：形如[["a", "b"], [1, 2], [3, 4]]格式的JSON数据，主要是与算盘的前面板组件对接，进行数据可视化使用（输出桩需要设置为对象）
- 字符串：输出选中字符串值

![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A52.png)

3. 字段展示

- 展示字段名称与字段具体类型
- 展示字段数据分布

4. 操作

- 设置联接子句：点击"+"号，选择字段来添加一个或多个联接子句；子句设置完成后，需要点击绿色的勾按钮进行确认；点击子句后的"-"号可删除子句

![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A53.png)

- 设置联接内容：内联接（inner join）：使用内联接来合并数据源时，生成的数据将包含与两个数据源均匹配的值
点击圆圈中间交集部分为内联接，如下：

![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A54.png)

- 设置联接内容：左联接(left join)：使用左联接来合并数据源时，生成的数据将包含左侧数据源中的所有值以及右侧数据源中的对应匹配项。当左侧数据源中的值在右侧数据源中没有对应匹配项时，将在字段所有数据表中看到 "-"的值，意为null。
点击左侧蓝色圆圈内部（除交集处）为左联接，如下：

![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A55.png)

- 设置联接内容：右联接(right join)： 使用右联接来合并数据源时，生成的数据将包含右侧数据源中的所有值以及左侧数据源中的对应匹配项。当右侧数据源中的值在左侧数据源中没有对应匹配项时，将在字段所有数据表中看到 "-"值，意为null。
点击右侧红色圆圈内部（除交集处）为右联接，如下：

![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A56.png)

- 设置联接内容：外连接(full join)： 使用完全外部联接来合并数据源时，生成的数据将包含两个数据源中的所有值。当任一数据源中的值在另一个数据源中没有匹配项时，将在字段所有数据表中看到 "-"值，意为null。
点击左侧和右侧为外联接，如下：

![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A57.png)

- 两者设置完成后，字段数据概览列表和字段所有数据表会自动更新数据，生成预期结果

- 设置左右数据源需要使用的列，点击输入框，显示数据源所有列，可点击一个或多个列，或删除某个列

![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A58.png)

- 设置列名冲突后使用的后缀，当左右数据源列名发生冲突时，可分别设置双方列名冲突后使用的后缀

![](./img/%E6%95%B0%E6%8D%AE%E8%81%94%E6%8E%A59.png)